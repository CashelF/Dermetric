(()=>{"use strict";var e={5044:(e,t,n)=>{n.r(t),n.d(t,{default:()=>fe});var r=n(5861),o=n(885),i=n(5004),a=n(3426),l=n(6792),s=n(1054),c=n(7492),d=n(1263),u=n(5705),f=n(363),h=n(4942),g=n(4584),p=n(9385),m=n(3287),y=n(2152),b=n(5288),j=n(229),w=n(2113),x=n(2826);const v={background:"#F6F6F6",primary:"#ECF2F3",accent:"#45B3CB"};var C=n(1318),O=n(3992),S=n(9986),k=n(9964),B=n(9910),T=n(7602),z=n(5295),A=n(2629);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var I=g.default.get("window"),R=I.width,D=I.height,N="web"===y.default.OS&&R>768,E=l.default.create({headerContainer:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({height:N?80:.1*D,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginHorizontal:N?"10%":22},N&&{maxWidth:1200,alignSelf:"center",width:"80%",paddingHorizontal:20}),leftIcon:{color:"#45B3CB"},rightIcon:{color:"#45B3CB"}});const H=function(){var e=(0,C.useNavigation)();return(0,A.jsx)(T.default,{children:(0,A.jsxs)(p.default,{style:E.headerContainer,children:[(0,A.jsx)(b.default,{onPress:function(){e.navigate("Upload")},children:(0,A.jsx)(z.default,{name:"home",style:E.leftIcon,size:N?36:32})}),(0,A.jsx)(z.default,{name:"medkit",style:E.rightIcon,size:N?36:32})]})})};var V=n(8441);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=g.default.get("window"),K=L.width,W=(L.height,"web"===y.default.OS),U=W&&K>768,q=function(e){return{MEL:"A type of skin cancer that develops from the pigment-producing cells known as melanocytes.",NV:"Commonly known as a mole, these are typically benign skin growths that result from a proliferation of melanocytes.",BCC:"A form of skin cancer that begins in the basal cells \u2013 cells within the skin that produce new skin cells as old ones die off.",AK:"A rough, scaly patch on the skin that develops from years of exposure to the sun and is considered a precancerous skin lesion.",BKL:"A benign skin lesion that includes seborrheic keratoses and solar lentigines. These are common non-cancerous growths.",DF:"A non-cancerous round, brownish skin growth, typically found on the lower legs.",VASC:"These are skin lesions that are made up of blood vessels that have abnormally proliferated. They include things like cherry angiomas, angiokeratomas, and pyogenic granulomas.",SCC:"A form of skin cancer that develops in the squamous cells, which make up the middle and outer layers of the skin."}[e]},_=l.default.create({container:M({flex:1},W&&{height:"100vh",overflow:"hidden"}),boxContainer:M({flex:1,paddingHorizontal:U?"10%":20,paddingTop:10,height:"25%"},U&&{maxWidth:1e3,alignSelf:"center",width:"100%"}),box:{marginBottom:10},inner:{paddingHorizontal:10,paddingVertical:U?15:"4%",borderRadius:15,backgroundColor:"#45B3CB"},innerSecond:{paddingHorizontal:10,paddingVertical:U?15:"4%",borderRadius:15,backgroundColor:"rgb(237, 115, 144)"},innerThird:{paddingHorizontal:10,paddingVertical:U?15:"4%",borderRadius:15,backgroundColor:"rgb(229, 152, 80)"},row:{flexDirection:"row",alignItems:"center"},arrow:{fontSize:24,marginRight:10,color:"white"},innerIcon:{color:"white",marginRight:10},shortenedName:{color:"white",fontSize:18,fontWeight:"bold",marginRight:10},expandedContent:{marginTop:10},fullname:{color:"white",fontSize:20,fontWeight:"bold"},descriptionText:{paddingTop:5,color:"white",fontSize:14},mainTextContainer:M({marginHorizontal:U?"10%":22},U&&{maxWidth:1e3,alignSelf:"center",width:"80%"}),mainText:{fontSize:U?28:24,lineHeight:U?36:32},arrowIcon:{color:"white",marginRight:10,fontSize:24}});const X=function(){var e,t=(null==(e=(0,C.useRoute)().params)?void 0:e.resultData).prediction,n=(0,i.useState)(new k.default.Value(0)),r=(0,o.default)(n,2),a=r[0],l=(r[1],(0,i.useState)(null)),c=(0,o.default)(l,2),d=c[0],u=c[1],f=function(e){var t=d===e?0:1;k.default.timing(a,{toValue:t,duration:300,easing:B.default.linear,useNativeDriver:!0}).start()},h=Object.keys(t).map((function(e){return[e,t[e]]}));h.sort((function(e,t){return t[1]-e[1]})),h=h.slice(0,4);var g={MEL:"Melanoma",NV:"Melanocytic Nevus",BCC:"Basal Cell Carcinoma",AK:"Actinic Keratosis",BKL:"Benign Keratosis",DF:"Dermatofibroma",VASC:"Vascular Lesion",SCC:"Squamous Cell Carcinoma"};return(0,A.jsxs)(p.default,{style:_.container,children:[(0,A.jsx)(H,{}),(0,A.jsxs)(p.default,{style:_.mainTextContainer,children:[(0,A.jsx)(s.default,{style:_.mainText,children:"Hello!"}),(0,A.jsx)(s.default,{style:_.mainText,children:"These are your top matches:"})]}),(0,A.jsx)(p.default,{style:_.boxContainer,children:h.map((function(e,t){return(0,A.jsx)(p.default,{style:[_.box,1===t?_.innerSecond:2===t?_.innerThird:_.inner],children:(0,A.jsx)(b.default,{onPress:function(){!function(e){u(d===e?null:e),f(e)}(t)},children:(0,A.jsxs)(p.default,{style:[_.innerContent,{backgroundColor:1===t?"rgb(237, 115, 144)":2===t?"rgb(229, 152, 80)":"#45B3CB"}],children:[(0,A.jsxs)(p.default,{style:_.row,children:[d===t?(0,A.jsx)(k.default.View,{style:[_.arrowIcon,{transform:[{rotate:a.interpolate({inputRange:[0,1],outputRange:["0deg","180deg"]})}]}],children:(0,A.jsx)(V.default,{name:"angle-down",style:_.arrowIcon})}):(0,A.jsx)(V.default,{name:"angle-right",style:_.arrowIcon}),(0,A.jsx)(z.default,{name:"medkit",style:_.innerIcon,size:24}),(0,A.jsxs)(s.default,{style:_.shortenedName,children:[e[0]," - ",(100*e[1]).toFixed(2),"%"]})]}),d===t&&(0,A.jsxs)(p.default,{style:_.expandedContent,children:[(0,A.jsx)(s.default,{style:_.fullname,children:g[e[0]]}),(0,A.jsx)(s.default,{style:_.descriptionText,children:q(e[0])})]})]})})},t)}))})]})};var G=n(3224);var J=l.default.create({container:{flex:1},boxContainer:{flex:1,paddingHorizontal:20,paddingTop:10,height:"25%"},box:{marginBottom:10,borderRadius:15},inner:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15},innerSecond:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15},innerThird:{paddingHorizontal:10,paddingVertical:"4%",borderRadius:15},row:{flexDirection:"row",alignItems:"center"},arrow:{fontSize:24,marginRight:10,color:"white"},innerIcon:{color:"white",marginRight:10},shortenedName:{color:"white",fontSize:18,fontWeight:"bold",marginRight:10},expandedContent:{marginTop:10},fullname:{color:"white",fontSize:20,fontWeight:"bold"},descriptionText:{paddingTop:5,color:"white",fontSize:14},mainTextContainer:{marginHorizontal:22},mainText:{fontSize:24,lineHeight:32},arrowIcon:{color:"white",marginRight:10,fontSize:24}});const Q=function(){var e={MEL:"Melanoma",NV:"Melanocytic Nevus",BCC:"Basal Cell Carcinoma",AK:"Actinic Keratosis",BKL:"Benign Keratosis",DF:"Dermatofibroma",VASC:"Vascular Lesion",SCC:"Squamous Cell Carcinoma"},t={MEL:"A type of skin cancer that develops from the pigment-producing cells known as melanocytes.",NV:"Commonly known as a mole, these are typically benign skin growths that result from a proliferation of melanocytes.",BCC:"A form of skin cancer that begins in the basal cells \u2013 cells within the skin that produce new skin cells as old ones die off.",AK:"A rough, scaly patch on the skin that develops from years of exposure to the sun and is considered a precancerous skin lesion.",BKL:"A benign skin lesion that includes seborrheic keratoses and solar lentigines. These are common non-cancerous growths.",DF:"A non-cancerous round, brownish skin growth, typically found on the lower legs.",VASC:"These are skin lesions that are made up of blood vessels that have abnormally proliferated. They include things like cherry angiomas, angiokeratomas, and pyogenic granulomas.",SCC:"A form of skin cancer that develops in the squamous cells, which make up the middle and outer layers of the skin."},n=function(e){return["#45B3CB","rgb(237, 115, 144)","rgb(229, 152, 80)"][e%3]};return(0,A.jsxs)(p.default,{style:J.container,children:[(0,A.jsx)(H,{}),(0,A.jsxs)(p.default,{style:J.mainTextContainer,children:[(0,A.jsx)(s.default,{style:J.mainText,children:"Hello!"}),(0,A.jsx)(s.default,{style:J.mainText,children:"These are common conditions:"})]}),(0,A.jsx)(G.default,{style:J.boxContainer,children:Object.keys(e).map((function(r,o){return(0,A.jsx)(p.default,{style:[J.box,{backgroundColor:n(o)}],children:(0,A.jsxs)(p.default,{style:J.inner,children:[(0,A.jsx)(s.default,{style:J.fullname,children:e[r]}),(0,A.jsx)(s.default,{style:J.descriptionText,children:t[r]})]})},o)}))})]})};var Y=(0,O.default)();const Z=function(){return(0,A.jsxs)(Y.Navigator,{initialRouteName:"ResultScreen",activeColor:"#fff",barStyle:{backgroundColor:"#45B3CB"},children:[(0,A.jsx)(Y.Screen,{name:"ResultScreen",component:X,options:{tabBarLabel:"Home",tabBarIcon:function(e){var t=e.color;return(0,A.jsx)(S.default,{name:"home",color:t,size:26})}}}),(0,A.jsx)(Y.Screen,{name:"ConditionsScreen",component:Q,options:{tabBarLabel:"Conditions",tabBarIcon:function(e){var t=e.color;return(0,A.jsx)(S.default,{name:"medical-bag",color:t,size:26})}}})]})};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=g.default.get("window"),ne=te.width,re=te.height,oe="web"===y.default.OS,ie=oe&&ne>768,ae=ie?Math.min(.6*re,500):1.6*ne,le=n(6135),se=l.default.create({container:ee({flex:1,backgroundColor:v.background,alignItems:"center",justifyContent:"center"},oe&&{height:"100vh",overflow:"hidden"}),title:{color:v.accent,fontSize:ie?40:36,marginBottom:ie?30:50,fontFamily:"Nunito-Bold",fontWeight:"700"},imageAndEllipseContainer:ee({alignItems:"center",justifyContent:"center"},ie&&{marginTop:-20}),ellipse:{position:"absolute",top:ie?-ae/2:-ae/1.6,width:ne,height:ae,backgroundColor:v.primary,borderRadius:ne,transform:[{scaleX:1.25}]},image:{width:ie?180:.4*ne,height:ie?231/269*180:.4*ne*(231/269),zIndex:1,aspectRatio:1},header:{fontSize:22,marginTop:ie?30:50,marginBottom:ie?15:20,fontFamily:"Nunito-Bold",fontWeight:"700"},description:{fontSize:20,fontFamily:"Nunito-Regular",textAlign:"center",marginHorizontal:50,marginBottom:ie?30:50},button:{backgroundColor:v.accent,borderRadius:20,padding:10,width:ie?300:.75*ne,height:50,justifyContent:"center",alignItems:"center"},loaderContainer:ee(ee({},l.default.absoluteFillObject),{},{backgroundColor:"rgba(255, 255, 255, 0.5)",justifyContent:"center",alignItems:"center",zIndex:999})});const ce=function(){var e=(0,C.useNavigation)(),t=(0,i.useState)(!1),n=(0,o.default)(t,2),a=n[0],l=n[1],c=function(){var e=(0,r.default)((function*(){if((yield w.requestMediaLibraryPermissionsAsync()).granted){var e=yield w.launchImageLibraryAsync({mediaTypes:x.MediaTypeOptions.Images,allowsEditing:!0,quality:1});if(!0!==e.canceled)return e}else alert("Photo access is not enabled!")}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uri.match(/^data:(.*);base64,/),n=t?t[1]:null,r=new FormData;if(e.uri.startsWith("file://"))r.append("file",{uri:"ios"===y.default.OS?e.uri.replace("file://",""):e.uri,type:n||"image/jpeg",name:e.fileName||"image.jpg"});else{var o=function(e,t){for(var n=atob(e.split(",")[1]),r=new Array(n.length),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);var i=new Uint8Array(r);return new Blob([i],{type:t})}(e.uri,e.type||"image/jpeg");r.append("file",o,e.fileName||"image.jpg")}return r},u=function(){var t=(0,r.default)((function*(){try{var t=yield c();if(!t)return;l(!0);var n=d({uri:t.assets[0].uri,type:"image/jpeg",name:"photo.jpg"}),r=yield fetch("https://api.dermetric.cashel.dev/api/ml/predict",{method:"POST",body:n});if(!r.ok)throw new Error("Something went wrong with the API call");var o=yield r.json();e.navigate("Main",{screen:"ResultScreen",params:{resultData:o}})}catch(i){console.error("Error during image upload: ",i),alert("Error during image upload. Please try again.")}finally{l(!1)}}));return function(){return t.apply(this,arguments)}}();return(0,A.jsxs)(p.default,{style:se.container,children:[a&&(0,A.jsx)(p.default,{style:se.loaderContainer,children:(0,A.jsx)(j.default,{size:"large",color:v.accent})}),(0,A.jsxs)(p.default,{style:se.imageAndEllipseContainer,children:[(0,A.jsx)(p.default,{style:se.ellipse}),(0,A.jsx)(s.default,{style:se.title,children:"Dermetric"}),(0,A.jsx)(m.default,{source:le,style:se.image})]}),(0,A.jsx)(s.default,{style:se.header,children:"AI Medical Assistant"}),(0,A.jsx)(s.default,{style:se.description,children:"Use our image classification machine learning algorithms to test for skin disorders"}),!a&&(0,A.jsx)(b.default,{style:se.button,onPress:u,children:(0,A.jsx)(s.default,{style:{color:"white",fontSize:18,fontFamily:"Nunito-Bold",fontWeight:"700"},children:"Upload Image"})})]})};var de=(0,f.default)();const ue=function(){return(0,A.jsxs)(de.Navigator,{initialRouteName:"Upload",children:[(0,A.jsx)(de.Screen,{name:"Upload",component:ce,options:{headerShown:!1}}),(0,A.jsx)(de.Screen,{name:"Main",component:Z,options:{headerShown:!1}})]})};function fe(){var e=(0,i.useState)(!1),t=(0,o.default)(e,2),l=t[0],f=t[1];function h(){return(h=(0,r.default)((function*(){yield c.loadAsync({"Nunito-Bold":n(8267),"Nunito-Regular":n(9218)})}))).apply(this,arguments)}return(0,i.useEffect)((function(){function e(){return e=(0,r.default)((function*(){try{yield d.preventAutoHideAsync(),yield function(){return h.apply(this,arguments)}()}catch(e){console.warn(e)}finally{f(!0),d.hideAsync()}})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l?(0,A.jsxs)(u.default,{children:[(0,A.jsx)(a.default,{style:"auto"}),(0,A.jsx)(ue,{})]}):(0,A.jsx)(s.default,{children:"Loading Fonts..."})}l.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},8267:(e,t,n)=>{e.exports=n.p+"static/media/Nunito-Bold.275dd55e10ba966bcb9b.ttf"},9218:(e,t,n)=>{e.exports=n.p+"static/media/Nunito-Regular.9d7a6e03c6e3ed49c7ac.ttf"},6135:(e,t,n)=>{e.exports=n.p+"static/media/UploadScreenDoctor.f71cd1ae8623186831e1.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,i)=>{if(!r){var a=1/0;for(d=0;d<e.length;d++){for(var[r,o,i]=e[d],l=!0,s=0;s<r.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,i<a&&(a=i));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,o,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Dermetric/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[a,l,s]=r,c=0;if(a.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var d=s(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[151],(()=>n(6271)));r=n.O(r)})();
//# sourceMappingURL=main.7891fce6.js.map